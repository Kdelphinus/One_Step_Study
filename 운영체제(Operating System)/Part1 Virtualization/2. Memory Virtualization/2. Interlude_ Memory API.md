# [Interlude: Memory API](https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/14-vm-api.pdf)

## 1. 메모리 공간의 종류

C프로그램이 실행되면, 두 가지 유형의 메모리 공간이 할당된다.

1. **스택(stack)**
		- 할당과 반환은 프로그래머를 위해 컴파일러에 의해 암묵적으로 이루어진다.
		- 위 같은 특성때문에 때로는 **자동(automatic)** 메모리라고 불린다.
		- 변수를 선언하면 컴파일러가 나머지 작업을 수행하여 함수가 실행될 때, 스택에 공간을 확보한다.
		- 그리고 함수에서 리턴하면 컴파일러는 프로그래머를 대신하여 메모리를 반환한다.
		- 그렇기에 함수 리턴 이후에도 유지되어야 하는 것은 스택에 저장하지 않아야 한다.
2. **힙(heap)**
		- 오랫동안 값이 유지되어야 하는 변수는 힙에 저장해야 한다.
		- 모든 할당과 반환은 프로그래머에 의해 명시적으로 처리된다.
		- 프로그램 상에선 malloc() 하여 할당한 것들이 이에 해당
		- malloc() 이 힙의 주소를 반환하면 그 주소를 스택에 저장하여 사용한다.

## 2. malloc() 함수

malloc()을 호출하면 요청한 공간의 크기만큼 할당하면 힙에 할당에 성공하면 할당된 공간에 대한 포인터를, 실패하면 NULL을 반환한다.

## 3. free() 함수

더 이상 사용하지 않는 힙 메모리를 해제하기 위해 사용하는 함수

## 4. 흔한 오류

문서 참조

